(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["page-hit-admin-index~31ecd969"],{1276:function(t,e,a){"use strict";var i=a("d784"),n=a("44e7"),r=a("825a"),l=a("1d80"),s=a("4840"),o=a("8aa59"),u=a("50c4"),c=a("14c3"),d=a("9263"),p=a("d039"),h=[].push,f=Math.min,g=4294967295,v=!p((function(){return!RegExp(g,"y")}));i("split",2,(function(t,e,a){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var i=String(l(this)),r=void 0===a?g:a>>>0;if(0===r)return[];if(void 0===t)return[i];if(!n(t))return e.call(i,t,r);var s,o,u,c=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,v=new RegExp(t.source,p+"g");while(s=d.call(v,i)){if(o=v.lastIndex,o>f&&(c.push(i.slice(f,s.index)),s.length>1&&s.index<i.length&&h.apply(c,s.slice(1)),u=s[0].length,f=o,c.length>=r))break;v.lastIndex===s.index&&v.lastIndex++}return f===i.length?!u&&v.test("")||c.push(""):c.push(i.slice(f)),c.length>r?c.slice(0,r):c}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,a){var n=l(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,n,a):i.call(String(n),e,a)},function(t,n){var l=a(i,t,this,n,i!==e);if(l.done)return l.value;var d=r(t),p=String(this),h=s(d,RegExp),m=d.unicode,b=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(v?"y":"g"),_=new h(v?d:"^(?:"+d.source+")",b),w=void 0===n?g:n>>>0;if(0===w)return[];if(0===p.length)return null===c(_,p)?[p]:[];var y=0,D=0,x=[];while(D<p.length){_.lastIndex=v?D:0;var k,A=c(_,v?p:p.slice(D));if(null===A||(k=f(u(_.lastIndex+(v?0:D)),p.length))===y)D=o(p,D,m);else{if(x.push(p.slice(y,D)),x.length===w)return x;for(var B=1;B<=A.length-1;B++)if(x.push(A[B]),x.length===w)return x;D=y=k}}return x.push(p.slice(y)),x}]}),!v)},1374:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"p-3"},[a("div",{staticClass:"p-3 shadow rounded"},[a("p",{},[t._v("list Report Pegawai")]),a("hr",{staticClass:"my-2"}),a("p",{},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.pegawai,expression:"pegawai"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.pegawai=e.target.multiple?a:a[0]}}},t._l(t.datanya,(function(e,i){return a("option",{key:i+"pegawai",domProps:{value:e.id}},[t._v(t._s(e.email))])})),0)])]),t.showPegawai?a("div",[a("ShowReport",{attrs:{uid:t.pegawai}})],1):t._e()])])},n=[],r=a("5530"),l=(a("4795"),a("d81d"),a("8aa5")),s=a.n(l),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"appreport_pegawai"}},[a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.btable?a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-10 p-3 shadow rounded"},[t.btable?a("div",[a("div",{staticClass:"p-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("p",[t._v("Bulan : ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filterBulan,expression:"filterBulan"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.filterBulan=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"01"}},[t._v("Januari")]),a("option",{attrs:{value:"02"}},[t._v("Februari")]),a("option",{attrs:{value:"03"}},[t._v("Maret")]),a("option",{attrs:{value:"04"}},[t._v("April")]),a("option",{attrs:{value:"05"}},[t._v("Mei")]),a("option",{attrs:{value:"06"}},[t._v("Juni")]),a("option",{attrs:{value:"07"}},[t._v("Juli")]),a("option",{attrs:{value:"08"}},[t._v("Agustus")]),a("option",{attrs:{value:"09"}},[t._v("September")]),a("option",{attrs:{value:"10"}},[t._v("Oktober")]),a("option",{attrs:{value:"11"}},[t._v("November")]),a("option",{attrs:{value:"12"}},[t._v("Desember")])])]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"sm-form "},[a("label",{attrs:{for:"filterTahun"}},[t._v("Tahun : ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filterTahun,expression:"filterTahun"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.filterTahun=e.target.multiple?a:a[0]}}},t._l(50,(function(e,i){return a("option",{key:i+"ok"},[t._v(t._s(2020+e))])})),0)])])])]),a("Btable",{attrs:{tables:t.td,hide:["upload","id","created_at","updated_at","deleted_at","file","gambar"]},on:{selected:t.ambil,hapusdata:t.hapusData,hapussemuadata:t.hapusSemuaData,pdf:t.pdf,excel:t.excel}})],1):t._e()])]):a("div",[t._m(0)])])])},u=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-center align-items-center shadow-lg rounded-lg",staticStyle:{height:"60vh"}},[a("div",{staticStyle:{width:"100%"}},[a("p",{staticClass:"text-center animate__animated animate__bounce animate__infinite text-lg font-semibold "},[t._v("Loading ...")])])])}],c=a("1da1"),d=(a("96cf"),a("4de4"),a("c975"),a("1276"),a("ac1f"),a("a15b"),a("4160"),a("159b"),a("a4d3"),a("e01a"),a("0d03"),a("6be6")),p=a("4b97"),h=new p["a"],f=s.a.firestore(),g={props:["uid"],layout:"hit-mobile",data:function(){return{vdata:{},btn:"tambah",filterBulan:"01",filterTahun:"2022",content:"",datanya:[],relationship:{},btable:!1,forms:!1}},components:{Btable:d["a"]},watch:{filterBulan:function(){var t=this;this.btable=!1,this.$forceUpdate(),setTimeout((function(){t.btable=!0,t.$forceUpdate()}),500)},filterTahun:function(){var t=this;this.btable=!1,this.$forceUpdate(),setTimeout((function(){t.btable=!0,t.$forceUpdate()}),500)}},computed:{td:function(){var t=this,e=this.datanya;return e=e.filter((function(e){if(-1!=e.tanggal.split("-")[0].indexOf(t.filterTahun))return e})),e=e.filter((function(e){if(-1!=e.tanggal.split("-")[1].indexOf(t.filterBulan))return e})),e}},methods:{getAlldata:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,f.collection("".concat(t)).get();case 2:return i=a.sent,i=i.docs.map((function(t){return Object(r["a"])({id:t.id},t.data())})),e.relationship[t]=i,a.abrupt("return",i);case 6:case"end":return a.stop()}}),a)})))()},pdf:function(){},excel:function(){window.open("https://akbarmaliki.github.io/infolayanansjs/#/excel?data=".concat(JSON.stringify(this.datanya).split("&").join("%26")),"_blank")},hapusData:function(){var t=this;confirm("Apakah hapus data ?")&&f.collection("users/"+this.uid+"/report_pegawai").doc(this.vdata.id)["delete"]().then((function(e){t.getData(),h.alert("Delete Data Berhasil","bg-green-400")}))["catch"]((function(t){h.alert("Delete Data Gagal","bg-red-400")}))},hapusSemuaData:function(t){var e=this,a=this;confirm("Apakah hapus Semua data ?")&&(t.forEach((function(t){f.collection("users/"+e.uid+"/report_pegawai").doc(t.id)["delete"]().then((function(t){h.alert("Delete Data Berhasil","bg-green-400")}))["catch"]((function(t){h.alert("Delete Data Gagal","bg-red-400")}))})),setTimeout((function(){a.getData()}),2e3))},upload:function(t){var e=this,a=document.querySelector("#".concat(t));a=document.querySelector("#filenya"),h.collection("tbuser",!1).upload(a,!1,!0).then((function(a){e.vdata["".concat(t)]=a,e.$forceUpdate(),h.alert("Upload Data Berhasil","bg-green-400")}))},ambil:function(t){this.vdata=JSON.parse(JSON.stringify(t)),this.btn="update",this.forms=!0,this.$forceUpdate()},getData:function(){var t=this;t.btable=!1,f.collection("users/"+this.uid+"/report_pegawai").get().then((function(e){var a=e.docs.map((function(t){return Object(r["a"])({id:t.id},t.data())}));a=a.map((function(t){return{id:t.id,tanggal:t.tanggal,time_dari:t.time_dari,time_sampai:t.time_sampai,subject:t.subject,customer_id:t.customer_id,assigned_id:t.assigned_id,tags_id:t.tags_id,stage_id:t.stage_id,description:t.description,helpdesk_id:t.helpdesk_id,ticket_type_id:t.ticket_type_id}})),a=_.orderBy(a,["tanggal"],["asc"]),t.datanya=a,t.btable=!0,t.$forceUpdate(),h.alert("Get Data Berhasil","bg-green-400")}))["catch"]((function(e){t.btable=!0,h.alert("Get Data Gagal","bg-red-400")}))},submit:function(){var t=this;confirm("Apakah yakin proses dilanjutkan ?")&&("tambah"==this.btn?(delete this.vdata.id,f.collection("users/"+this.uid+"/report_pegawai").doc().set(this.vdata,{merge:!0}).then((function(e){t.getData(),h.alert("Add Data Berhasil","bg-green-400")}))["catch"]((function(t){h.alert("Add Data Gagal","bg-red-400")}))):"update"==this.btn?f.collection("users/"+this.uid+"/report_pegawai").doc(this.vdata.id).set(this.vdata,{merge:!0}).then((function(e){t.getData(),h.alert("Update Data Berhasil","bg-green-400")}))["catch"]((function(t){h.alert("Update Data Gagal","bg-red-400")})):"delete"==this.btn&&f.collection("users/"+this.uid+"/report_pegawai").doc(this.vdata.id)["delete"]().then((function(e){t.getData(),h.alert("Delete Data Berhasil","bg-green-400")}))["catch"]((function(t){h.alert("Delete Data Gagal","bg-red-400")})))},getTahun:function(t){return this.$datefns.format(new Date(t),"YYYY")},getBulan:function(t){return this.$datefns.format(new Date(t),"MM")}},mounted:function(){var t=this;this.filterTahun=this.getTahun(new Date),this.filterBulan=this.getBulan(new Date),setTimeout((function(){t.getData(),t.getAlldata("customer"),t.getAlldata("assigned"),t.getAlldata("tags"),t.getAlldata("stage"),t.getAlldata("helpdesk"),t.getAlldata("ticket_type")}),1e3)}},v=g,m=a("2877"),b=Object(m["a"])(v,o,u,!1,null,null,null),w=b.exports,y=s.a.firestore(),D={data:function(){return{datanya:[],pegawai:"",showPegawai:!1}},watch:{pegawai:function(){var t=this;this.showPegawai=!1,this.$forceUpdate(),setTimeout((function(){t.showPegawai=!0,t.$forceUpdate()}),500)}},components:{ShowReport:w},mounted:function(){this.getAllDataKaryawan()},methods:{getAllDataKaryawan:function(){var t=this;y.collection("users").onSnapshot((function(e){var a=e.docs.map((function(t){return Object(r["a"])({id:t.id},t.data())}));t.datanya=a,t.$forceUpdate()}))}}},x=D,k=Object(m["a"])(x,i,n,!1,null,null,null);e["default"]=k.exports},"44e7":function(t,e,a){var i=a("861d"),n=a("c6b6"),r=a("b622"),l=r("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[l])?!!e:"RegExp"==n(t))}},a15b:function(t,e,a){"use strict";var i=a("23e7"),n=a("44ad"),r=a("fc6a"),l=a("a640"),s=[].join,o=n!=Object,u=l("join",",");i({target:"Array",proto:!0,forced:o||!u},{join:function(t){return s.call(r(this),void 0===t?",":t)}})}}]);
//# sourceMappingURL=page-hit-admin-index~31ecd969.adafa2a1.js.map