(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["page-auth-login~61f48954"],{e37c:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("br"),a("br"),a("br"),a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-md-8"},[a("img",{attrs:{src:"https://www.hasnurgroup.com/assets/img/logo.png",alt:""}}),a("br"),a("div",{staticClass:"card"},[a("div",{staticClass:"card-header p-5 text-lg font-semibold"},[t._v("Login")]),a("div",{staticClass:"card-body p-5"},[t.error?a("div",{staticClass:"alert alert-danger"},[t._v(t._s(t.error))]):t._e(),a("p",{staticClass:"text-xs font-semibold p-3 text-red"}),a("form",{attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),t.loginAuth(e)}}},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-4 col-form-label text-md-right",attrs:{for:"email"}},[t._v("Email")]),a("div",{staticClass:"col-md-6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.email,expression:"vdata.email"}],staticClass:"form-control",attrs:{id:"email",type:"email",name:"email",value:"",required:"",autofocus:""},domProps:{value:t.vdata.email},on:{input:function(e){e.target.composing||t.$set(t.vdata,"email",e.target.value)}}})])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-4 col-form-label text-md-right",attrs:{for:"password"}},[t._v("Password")]),a("div",{staticClass:"col-md-6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.password,expression:"vdata.password"}],staticClass:"form-control",attrs:{id:"password",type:"password",name:"password",required:""},domProps:{value:t.vdata.password},on:{input:function(e){e.target.composing||t.$set(t.vdata,"password",e.target.value)}}})])]),t._m(0),a("br"),a("p",{staticClass:"text-center font-times"},[t._v("Atau login menggunakan")]),a("br"),t.cordova?a("div",[a("div",{staticClass:"col-md-12",on:{click:t.cordovaGoogleAuth}},[t._m(1)])]):a("div",[a("div",{staticClass:"col-md-12",on:{click:t.googleAuth}},[a("img",{staticStyle:{width:"200px",display:"block",margin:"auto"},attrs:{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSTAYxxDv8asU0Re49sZnHaqNpBvmn66Cun7i7V8hF9tDEUzLftYVeGkfs1aMbA02XIeQ&usqp=CAU",alt:""}})])])]),a("br"),a("br")])])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-md-12 text-center"},[a("button",{staticClass:"btn btn-primary font-times",attrs:{type:"submit"}},[a("span",{staticClass:"typcn typcn-key"}),t._v(" Login ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"btn btn-lg btn-outline-secondary text-sm btn-block",attrs:{href:"#"}},[a("img",{staticClass:"float-left pt-1",attrs:{src:"https://img.icons8.com/color/16/000000/google-logo.png"}}),t._v("Login Dengan Google ")])}],o=(a("4795"),a("8aa5")),r=a.n(o),n=a("4b97"),l=r.a.firestore(),c=new n["a"],u={data:function(){return{vdata:{email:"",password:""},cordova:!1,error:null}},methods:{loginSdb:function(){this.vdata.username=this.vdata.email,c.collection("tbuser",!1).login2(this.vdata,this.$store,this.$router,"/hit").then((function(t){console.log(t)}))},loginAuth:function(){var t=this;"admin@gmail.com"!=this.vdata.email||"admindebug"!=this.vdata.password?r.a.auth().signInWithEmailAndPassword(this.vdata.email,this.vdata.password).then((function(e){var a={uid:e.user.uid,displayName:e.user.displayName,email:e.user.email,emailVerified:e.user.emailVerified};t.$store.commit("changeUsers",a),localStorage.setItem("users",JSON.stringify(a)),t.$router.push("/hit")}))["catch"]((function(e){t.error=e.message})):this.$router.push("/hit/admin")},googleAuth:function(){var t=this,e=new r.a.auth.GoogleAuthProvider;r.a.auth().signInWithPopup(e).then((function(e){var a={uid:e.user.uid,displayName:e.user.displayName,email:e.user.email,emailVerified:e.user.emailVerified,emailnotif:e.user.email,changepassword:"true",unit:{nama_unit:"BELUM ADA"}};r.a.auth().currentUser.getIdToken(!0).then((function(t){localStorage.setItem("auth._token.local","bearer "+t),localStorage.setItem("auth.local","bearer "+t)}))["catch"]((function(t){})),t.$store.commit("changeUsers",a),console.log("user",a),localStorage.setItem("users",JSON.stringify(a)),l.collection("users").doc(e.user.uid).set(a,{merge:!0}).then((function(e){t.Oauth=!0,t.$nuxt.$emit("busy",!0),setTimeout((function(){t.$nuxt.$emit("busy",!1),t.$router.push("/hit")}),3e3)}))}))["catch"]((function(t){alert("Oops. "+t.message)}))},facebookAuth:function(){var t=this,e=new r.a.auth.FacebookAuthProvider;r.a.auth().signInWithPopup(e).then((function(e){var a={uid:e.user.uid,displayName:e.user.displayName,email:e.user.email,emailVerified:e.user.emailVerified};t.$store.commit("changeUsers",a),localStorage.setItem("users",JSON.stringify(a)),t.Oauth=!0,t.$router.push("/hit")}))["catch"]((function(t){alert("Oops. "+t.message)}))},cordovaGoogleAuth:function(){var t=this;window.plugins.googleplus.login({webClientId:"518827785832-j1qgrdvp0r75kdlk433puh5uvcmq5qjn.apps.googleusercontent.com",offline:!0},(function(e){var a=this;r.a.auth().signInWithCredential(r.a.auth.GoogleAuthProvider.credential(e.idToken)).then((function(e){var s={uid:e.user.uid,displayName:e.user.displayName,email:e.user.email,emailVerified:e.user.emailVerified,changepassword:"true",unit:{nama_unit:"BELUM ADA"}};r.a.auth().currentUser.getIdToken(!0).then((function(t){localStorage.setItem("auth._token.local","bearer "+t),localStorage.setItem("auth.local","bearer "+t)}))["catch"]((function(t){})),t.$store.commit("changeUsers",s),localStorage.setItem("users",JSON.stringify(s)),console.log(JSON.stringify(s)),l.collection("users").doc(e.user.uid).set(s,{merge:!0}).then((function(e){a.Oauth=!0,t.$router.push("/hit")}))}))["catch"]((function(t){alert("Oops. "+t.message)}))}),(function(t){alert("error: "+t)}))}},mounted:function(){var t=this,e=this;r.a.auth().onAuthStateChanged((function(e){if(e){var a=function(t){t.preventDefault(),t.stopPropagation(),navigator.app.exitApp()},s={uid:e.uid,displayName:e.displayName,name:e.displayName,email:e.email,emailVerified:e.emailVerified,gambar:e.photoURL,level:"user",auth:"google"};r.a.auth().currentUser.getIdToken(!0).then((function(t){localStorage.setItem("auth._token.local",c.scramble("bearer "+t)),localStorage.setItem("auth.local",c.scramble("bearer "+t))}))["catch"]((function(t){})),t.$store.commit("changeUsers",s),localStorage.setItem("users",JSON.stringify(s)),console.log("login ada!"),document.addEventListener("backbutton",a,!1),setTimeout((function(){document.removeEventListener("backbutton",a,!1),t.$router.push("/hit")}),800)}else console.log("user sesion tidak ada")})),document.addEventListener("deviceready",(function(){e.cordova=!0}))}},d=u,m=a("2877"),g=Object(m["a"])(d,s,i,!1,null,null,null);e["default"]=g.exports}}]);
//# sourceMappingURL=page-auth-login~61f48954.0aba1c64.js.map